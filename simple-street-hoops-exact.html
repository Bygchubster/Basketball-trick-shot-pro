<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Street Hoops</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=JetBrains+Mono:wght@700&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #f3f4f6;
            font-family: 'Inter', sans-serif;
        }
        .font-mono {
            font-family: 'JetBrains Mono', monospace;
        }
    </style>
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client"
      }
    }
    </script>
</head>
<body>
    <div id="root"></div>
    <script type="module">
HTMLEOF
cat >> /mnt/user-data/outputs/simple-street-hoops-exact.html << 'JSENDMARKER'
import React, { useState, useCallback, useRef, useEffect } from 'react';
import ReactDOM from 'react-dom/client';

const LOCAL_FALLBACKS={SCORED:["Nothing but net!","That's how we do it in the streets.","Bucket! Keep 'em coming.","Easy money.","Smooth as butter.","Automatic!","He's heating up!"],SWISH:["Drained it! Clean!","Swish! Perfection.","That sound... pure music.","Absolute laser focus.","String music!","Splashed it!"],MISSED:["Clank! Off the iron.","Need more touch on that one.","Brick city!","Keep your head up, go again.","Ice cold right now.","Short! Adjust the power."],"LEVEL UP":["Level Up! The stakes just got higher.","New level, new obstacles. Stay focused.","Moving on up! You're dominating the court.","Level cleared! Let's see what's next."],START:["Welcome to the court. Let's see some game.","Ball's in your court. Show me something.","Don't let the pressure get to you."]};
const fetchCommentary=async(e,s)=>{let t="SCORED";e.includes("LEVEL")?t="LEVEL UP":e.includes("SWISH")?t="SWISH":e.includes("MISSED")?t="MISSED":e.includes("START")&&(t="START");const c=LOCAL_FALLBACKS[t]||LOCAL_FALLBACKS.SCORED;return c[Math.floor(Math.random()*c.length)]};
const HUD=({gameState:e,isLoadingModifier:s,onBackToMenu:t})=>React.createElement("div",{className:"relative z-20 w-full max-w-4xl px-4 py-6 flex flex-col gap-6"},React.createElement("div",{className:"flex justify-between items-center"},React.createElement("div",{className:"flex gap-3"},React.createElement("button",{onClick:t,className:"bg-slate-900 border-2 border-slate-900 p-3 rounded-xl shadow-lg hover:bg-slate-800 transition-colors group"},React.createElement("p",{className:"text-[9px] text-slate-400 font-bold uppercase tracking-widest group-hover:text-orange-400 transition-colors"},"Menu"),React.createElement("div",{className:"flex items-center justify-center mt-1"},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})))),React.createElement("div",{className:"bg-slate-900 border-2 border-slate-900 p-3 rounded-xl shadow-lg min-w-[90px] text-center"},React.createElement("p",{className:"text-[9px] text-slate-400 font-bold uppercase tracking-widest"},"Score"),React.createElement("p",{className:"text-3xl font-mono font-black text-white"},e.score)),React.createElement("div",{className:"bg-white border-2 border-slate-900 p-3 rounded-xl shadow-lg min-w-[90px] text-center"},React.createElement("p",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest"},"Level"),React.createElement("p",{className:"text-3xl font-mono font-black text-slate-900"},e.level))),React.createElement("div",{className:"flex-1 px-8"},React.createElement("p",{className:"text-xl font-bold text-slate-800 italic text-center leading-tight"},`"${e.commentary}"`))));
const Menu=({onSelectLevel:e})=>{const s=Array.from({length:20},(e,s)=>s+1),t=t=>1===t?"TUTORIAL":4===t?"BOUNCE":5===t?"RICOCHET":7===t?"BOOST":9===t?"BOUNCY":11===t?"TRENCH":12===t?"ROTATOR":13===t?"ZIGZAG":14===t?"WINDOW":15===t?"TRICKSHOT":16===t?"CRUSHER":17===t?"PLINKO":19===t?"FAN":20===t?"MASTER":t>15?"HARD":t>8?"PRO":"EASY";return React.createElement("div",{className:"w-full h-full flex flex-col items-center justify-center bg-slate-100 overflow-y-auto py-12 px-6"},React.createElement("div",{className:"max-w-4xl w-full"},React.createElement("header",{className:"text-center mb-12"},React.createElement("h1",{className:"text-8xl font-black italic tracking-tighter text-slate-900 uppercase leading-none"},"STREET",React.createElement("br"),"HOOPS"),React.createElement("div",{className:"h-3 w-48 bg-orange-600 mx-auto mt-4 rounded-full"}),React.createElement("p",{className:"mt-6 text-slate-500 font-bold uppercase tracking-[0.3em] text-sm"},"Select Your Level")),React.createElement("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4"},s.map(s=>React.createElement("button",{key:s,onClick:()=>e(s),className:"group relative bg-white border-4 border-slate-900 rounded-2xl p-6 shadow-[8px_8px_0px_0px_rgba(15,23,42,1)] hover:shadow-none hover:translate-x-1 hover:translate-y-1 transition-all flex flex-col items-center justify-center aspect-square"},React.createElement("span",{className:"text-sm font-black text-slate-400 uppercase tracking-widest mb-1 group-hover:text-orange-600 transition-colors"},"Lvl"),React.createElement("span",{className:"text-5xl font-black text-slate-900 group-hover:scale-110 transition-transform"},s),React.createElement("div",{className:`mt-2 px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-wider ${1===s?"bg-green-100 text-green-700":20===s?"bg-red-100 text-red-700 animate-pulse":"bg-slate-100 text-slate-600"}`},t(s)),React.createElement("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity"},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-orange-600",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})))))),React.createElement("footer",{className:"mt-16 text-center text-slate-400 font-medium"},React.createElement("p",{className:"text-xs uppercase tracking-widest"},"Master the specific mechanics to beat each stage"))))};
const WinView=({score:e,attempts:s,onPlayAgain:t})=>React.createElement("div",{className:"w-full h-full flex flex-col items-center justify-center bg-slate-900 text-white overflow-hidden p-6 text-center"},React.createElement("div",{className:"max-w-md w-full animate-in fade-in zoom-in duration-700"},React.createElement("h1",{className:"text-8xl font-black italic tracking-tighter uppercase leading-none text-orange-600 mb-2"},"YOU WIN"),React.createElement("div",{className:"h-2 w-full bg-white mb-8 rounded-full"}),React.createElement("p",{className:"text-xl font-bold text-slate-400 uppercase tracking-widest mb-12"},"You are the king of the court"),React.createElement("div",{className:"grid grid-cols-2 gap-4 mb-12"},React.createElement("div",{className:"bg-slate-800 p-6 rounded-3xl border-2 border-slate-700"},React.createElement("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-1"},"Final Score"),React.createElement("p",{className:"text-5xl font-black italic"},e)),React.createElement("div",{className:"bg-slate-800 p-6 rounded-3xl border-2 border-slate-700"},React.createElement("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-1"},"Total Shots"),React.createElement("p",{className:"text-5xl font-black italic"},s))),React.createElement("button",{onClick:t,className:"w-full py-6 bg-orange-600 hover:bg-orange-500 text-white rounded-3xl font-black text-2xl uppercase italic tracking-tighter shadow-[0px_10px_0px_0px_rgba(154,52,18,1)] hover:shadow-none hover:translate-y-2 transition-all"},"Back to Menu"),React.createElement("p",{className:"mt-12 text-slate-600 font-bold uppercase tracking-[0.4em] text-[10px]"},"Street Hoops Legacy • Champion")));
const IS={SETTING_ANGLE:0,SETTING_POWER:1,READY_TO_FIRE:2,FLYING:3};
const GameView=({gravity:g,level:l,wind:w,onScore:os,onMiss:om})=>{const cr=useRef(null),cor=useRef(null),[is,sis]=useState(IS.SETTING_ANGLE),[slb,sslb]=useState(false),[p,sp]=useState(.5),ar=useRef(0),rr=useRef(0),obr=useRef([]),fr=useRef([]),llr=useRef(l),npr=useRef(0);const CS=.92,BSX=120,BHF=1/3,br=useRef({pos:{x:BSX,y:300},vel:{x:0,y:0},radius:14,isFlying:false,bounces:0,scored:false}),hr=useRef({pos:{x:960,y:300},radius:28,hitboxWidth:40});const rb=useCallback(()=>{let h=cr.current?.height||600;const fy=h-60,sy=fy-(fy*BHF);br.current={pos:{x:BSX,y:sy},vel:{x:0,y:0},radius:14,isFlying:false,bounces:0,scored:false};sis(IS.SETTING_ANGLE);rr.current=0;},[]);const io=useCallback((lv,w,h)=>{const o=[],fy=h-60,mx=w/2,my=h/2;if(lv===1){}else if(lv===2){o.push({pos:{x:mx-100,y:my},width:200,height:fy-my,isMoving:false,velocity:0,range:0,startPos:{x:mx-100,y:my},color:'#1e293b',type:'solid'});}else if(lv===3){o.push({pos:{x:mx-20,y:50},width:40,height:fy-200,isMoving:true,velocity:.003,range:150,startPos:{x:mx-20,y:150},color:'#334155',type:'solid',movementAxis:'y'});}else if(lv===4){o.push({pos:{x:mx,y:0},width:30,height:fy-140,isMoving:false,velocity:0,range:0,startPos:{x:mx,y:0},color:'#0f172a',type:'solid'});o.push({pos:{x:mx-80,y:fy-20},width:160,height:20,isMoving:false,velocity:0,range:0,startPos:{x:mx-80,y:fy-20},color:'#06b6d4',type:'bounce'});}else if(lv===5){o.push({pos:{x:w-250,y:120},width:40,height:fy-120,isMoving:false,velocity:0,range:0,startPos:{x:w-250,y:120},color:'#1e293b',type:'solid'});o.push({pos:{x:w-450,y:0},width:350,height:30,isMoving:false,velocity:0,range:0,startPos:{x:w-450,y:0},color:'#0891b2',type:'bounce',angle:.1});}else if(lv===6){o.push({pos:{x:mx,y:0},width:40,height:my-60,isMoving:false,velocity:0,range:0,startPos:{x:mx,y:0},color:'#1e293b',type:'solid'});o.push({pos:{x:mx,y:my+60},width:40,height:fy-(my+60),isMoving:false,velocity:0,range:0,startPos:{x:mx,y:my+60},color:'#1e293b',type:'solid'});}else if(lv===7){o.push({pos:{x:300,y:my-80},width:500,height:20,isMoving:false,velocity:0,range:0,startPos:{x:300,y:my-80},color:'#1e293b',type:'solid'});o.push({pos:{x:300,y:my+60},width:500,height:20,isMoving:false,velocity:0,range:0,startPos:{x:300,y:my+60},color:'#1e293b',type:'solid'});o.push({pos:{x:300,y:0},width:20,height:my-80,isMoving:false,velocity:0,range:0,startPos:{x:300,y:0},color:'#1e293b',type:'solid'});}else if(lv===8){o.push({pos:{x:mx,y:my},width:40,height:500,isMoving:true,velocity:.002,range:200,startPos:{x:mx,y:300},color:'#1e293b',type:'solid',movementAxis:'y'});o.push({pos:{x:mx,y:my-500},width:40,height:400,isMoving:true,velocity:.002,range:200,startPos:{x:mx,y:-200},color:'#1e293b',type:'solid',movementAxis:'y'});}else if(lv===9){o.push({pos:{x:-w,y:fy-20},width:w*3,height:20,isMoving:false,velocity:0,range:0,startPos:{x:-w,y:fy-20},color:'#06b6d4',type:'bounce'});o.push({pos:{x:190,y:0},width:15,height:fy-100,isMoving:false,velocity:0,range:0,startPos:{x:190,y:0},color:'#1e293b',type:'solid'});o.push({pos:{x:320,y:0},width:100,height:20,isMoving:false,velocity:0,range:0,startPos:{x:320,y:0},color:'#0891b2',type:'bounce'});o.push({pos:{x:500,y:150},width:20,height:fy,isMoving:false,velocity:0,range:0,startPos:{x:500,y:150},color:'#1e293b',type:'solid'});}else if(lv===10){o.push({pos:{x:w-200,y:my-150},width:30,height:300,isMoving:true,velocity:.005,range:150,startPos:{x:w-200,y:my-150},color:'#ef4444',type:'solid',movementAxis:'y'});}else if(lv===11){o.push({pos:{x:400,y:fy-180},width:30,height:180,isMoving:false,velocity:0,range:0,startPos:{x:400,y:fy-180},color:'#1e293b',type:'solid'});o.push({pos:{x:700,y:fy-240},width:30,height:240,isMoving:false,velocity:0,range:0,startPos:{x:700,y:fy-240},color:'#1e293b',type:'solid'});}else if(lv===12){o.push({pos:{x:mx,y:my+130},width:350,height:24,isMoving:false,velocity:0,range:0,startPos:{x:mx,y:my+130},color:'#334155',type:'solid',angle:0,rotationSpeed:.02});}else if(lv===13){o.push({pos:{x:300,y:0},width:30,height:180,isMoving:false,velocity:0,range:0,startPos:{x:300,y:0},color:'#1e293b',type:'solid'});o.push({pos:{x:550,y:fy-180},width:30,height:180,isMoving:false,velocity:0,range:0,startPos:{x:550,y:fy-180},color:'#1e293b',type:'solid'});o.push({pos:{x:800,y:0},width:30,height:180,isMoving:false,velocity:0,range:0,startPos:{x:800,y:0},color:'#1e293b',type:'solid'});}else if(lv===14){o.push({pos:{x:mx,y:0},width:30,height:my-90,isMoving:false,velocity:0,range:0,startPos:{x:mx,y:0},color:'#1e293b',type:'solid'});o.push({pos:{x:mx,y:my+90},width:30,height:fy-(my+90),isMoving:false,velocity:0,range:0,startPos:{x:mx,y:my+90},color:'#1e293b',type:'solid'});o.push({pos:{x:mx-80,y:my-30},width:20,height:60,isMoving:true,velocity:.004,range:100,startPos:{x:mx-80,y:my-30},color:'#06b6d4',type:'bounce',movementAxis:'y'});}else if(lv===15){o.push({pos:{x:220,y:0},width:28,height:my,isMoving:false,velocity:0,range:0,startPos:{x:220,y:0},color:'#1e293b',type:'solid'});o.push({pos:{x:220,y:fy-25},width:140,height:15,isMoving:false,velocity:0,range:0,startPos:{x:220,y:fy-25},color:'#334155',type:'solid',angle:.18});o.push({pos:{x:440,y:fy-65},width:140,height:15,isMoving:false,velocity:0,range:0,startPos:{x:440,y:fy-65},color:'#334155',type:'solid',angle:-.45});o.push({pos:{x:w-250,y:0},width:250,height:120,isMoving:false,velocity:0,range:0,startPos:{x:w-250,y:0},color:'#1e293b',type:'solid'});}else if(lv===16){o.push({pos:{x:mx,y:0},width:60,height:350,isMoving:true,velocity:.008,range:250,startPos:{x:mx,y:150},color:'#ef4444',type:'solid',movementAxis:'y'});}else if(lv===17){const pts=[{x:120,y:66,w:100,h:40},{x:320,y:-4,w:120,h:40},{x:480,y:136,w:80,h:120},{x:160,y:296,w:150,h:40},{x:390,y:326,w:100,h:100},{x:560,y:236,w:80,h:80}];pts.forEach(pt=>{o.push({pos:{x:pt.x,y:pt.y},width:pt.w,height:pt.h,isMoving:false,velocity:0,range:0,startPos:{x:pt.x,y:pt.y},color:'#1e293b',type:'solid'});});}else if(lv===18){o.push({pos:{x:300,y:0},width:20,height:fy-100,isMoving:true,velocity:.006,range:200,startPos:{x:300,y:100},color:'#991b1b',type:'solid',movementAxis:'y'});o.push({pos:{x:500,y:0},width:20,height:fy-100,isMoving:true,velocity:.006,range:-200,startPos:{x:500,y:100},color:'#991b1b',type:'solid',movementAxis:'y'});}else if(lv===19){o.push({pos:{x:380,y:my},width:200,height:16,isMoving:false,velocity:0,range:0,startPos:{x:380,y:my},color:'#1e293b',type:'solid',rotationSpeed:.045});o.push({pos:{x:620,y:my},width:200,height:16,isMoving:false,velocity:0,range:0,startPos:{x:620,y:my},color:'#1e293b',type:'solid',rotationSpeed:-.07});o.push({pos:{x:840,y:my},width:180,height:16,isMoving:false,velocity:0,range:0,startPos:{x:840,y:my},color:'#1e293b',type:'solid',rotationSpeed:.055});}else if(lv===20){const bx=210,bh=fy-120,px=400;o.push({pos:{x:bx,y:0},width:25,height:bh,isMoving:false,velocity:0,range:0,startPos:{x:bx,y:0},color:'#0f172a',type:'solid'});o.push({pos:{x:bx,y:bh},width:px-bx,height:25,isMoving:false,velocity:0,range:0,startPos:{x:bx,y:bh},color:'#0f172a',type:'solid'});o.push({pos:{x:500,y:my},width:30,height:140,isMoving:true,velocity:.005,range:180,startPos:{x:500,y:my},color:'#1e293b',type:'solid',movementAxis:'y'});o.push({pos:{x:820,y:my},width:130,height:25,isMoving:true,velocity:.012,range:150,startPos:{x:820,y:my},color:'#ef4444',type:'solid',movementAxis:'y'});o.push({pos:{x:px,y:fy-20},width:w-px,height:20,isMoving:false,velocity:0,range:0,startPos:{x:px,y:fy-20},color:'#06b6d4',type:'bounce'});o.push({pos:{x:450,y:0},width:250,height:40,isMoving:false,velocity:0,range:0,startPos:{x:450,y:0},color:'#334155',type:'solid'});}else{const c=Math.min(6,Math.floor(lv/3));for(let i=0;i<c;i++){const ox=350+(i*120),oy=50+((i*113)%400),ty=Math.random()>.5?'solid':'bounce';o.push({pos:{x:ox,y:oy},width:20,height:100,isMoving:true,velocity:.002+(Math.random()*.002),range:120,startPos:{x:ox,y:oy},color:ty==='solid'?'#1e293b':'#06b6d4',type:ty,movementAxis:Math.random()>.5?'y':'x'});}}obr.current=o;},[]);const ifn=useCallback((w,h)=>{const f=[],cls=['#f87171','#60a5fa','#34d399','#fbbf24','#a78bfa','#f472b6'];for(let t=0;t<4;t++){const ty=h*.7-(t*45);for(let x=-200;x<w-100;x+=22){if(Math.random()>.25){f.push({x:x+(Math.random()*12-6),y:ty-18,color:cls[Math.floor(Math.random()*cls.length)],offset:Math.random()*Math.PI*2});}}}fr.current=f;},[]);useEffect(()=>{const hr=()=>{if(cor.current&&cr.current){const r=cor.current.getBoundingClientRect(),w=Math.floor(r.width),h=Math.floor(r.height);if(w<1||h<1)return;cr.current.width=w;cr.current.height=h;hr.current={pos:{x:w-90,y:h*.5},radius:28,hitboxWidth:40};io(l,w,h);ifn(w,h);rb();}};hr();window.addEventListener('resize',hr);return()=>window.removeEventListener('resize',hr);},[l,io,ifn,rb]);useEffect(()=>{if(l>llr.current){sslb(true);const t=setTimeout(()=>sslb(false),2e3);llr.current=l;rb();return()=>clearTimeout(t);}},[l,rb]);const hmm=e=>{if(is!==IS.SETTING_ANGLE)return;let cx,cy;if(e.touches&&e.touches.length>0){cx=e.touches[0].clientX;cy=e.touches[0].clientY;}else{cx=e.clientX;cy=e.clientY;}if(cor.current){const r=cor.current.getBoundingClientRect(),x=(cx-r.left)/CS,y=(cy-r.top)/CS,dx=x-br.current.pos.x,dy=y-br.current.pos.y;ar.current=Math.atan2(dy,dx);}};const hcmd=e=>{if(is===IS.SETTING_ANGLE){sis(IS.SETTING_POWER);}};const hs=e=>{e.stopPropagation();const mv=26,mnv=10,v=mnv+(p*(mv-mnv));br.current.vel={x:Math.cos(ar.current)*v,y:Math.sin(ar.current)*v};br.current.isFlying=true;br.current.bounces=0;br.current.scored=false;sis(IS.FLYING);};const hca=e=>{e.stopPropagation();sis(IS.SETTING_ANGLE);};const opc=e=>{e.stopPropagation();if(is!==IS.SETTING_POWER&&is!==IS.READY_TO_FIRE)return;const r=e.currentTarget.getBoundingClientRect(),v=1-(e.clientY-r.top)/r.height;sp(Math.min(1,Math.max(0,v)));if(is===IS.SETTING_POWER)sis(IS.READY_TO_FIRE);};useEffect(()=>{const c=cr.current;if(!c)return;const ctx=c.getContext('2d');if(!ctx)return;let aid;const BF=.75,SB=1.25,FR=.99;const rnd=t=>{ctx.clearRect(0,0,c.width,c.height);const ag=ctx.createLinearGradient(0,0,0,c.height);ag.addColorStop(0,'#020617');ag.addColorStop(1,'#0f172a');ctx.fillStyle=ag;ctx.fillRect(0,0,c.width,c.height);ctx.save();ctx.translate(c.width*(1-CS),c.height*(1-CS)/2);ctx.scale(CS,CS);const fy=c.height-60,wx=c.width;npr.current*=.94;if(npr.current<.001)npr.current=0;obr.current.forEach(ob=>{if(ob.isMoving){const of=Math.sin(t*ob.velocity)*ob.range;if(ob.movementAxis==='y'){ob.pos.y=ob.startPos.y+of;}else{ob.pos.x=ob.startPos.x+of;}}if(ob.rotationSpeed){ob.angle=(ob.angle||0)+ob.rotationSpeed;}});fr.current.forEach(fn=>{const bb=Math.sin(t*.005+fn.offset)*3;ctx.fillStyle=fn.color;ctx.beginPath();ctx.arc(fn.x,fn.y+bb,8,0,Math.PI*2);ctx.fill();ctx.fillRect(fn.x-6,fn.y+10+bb,12,10);});const wg=ctx.createLinearGradient(0,fy,0,c.height);wg.addColorStop(0,'#78350f');wg.addColorStop(1,'#451a03');ctx.fillStyle=wg;ctx.fillRect(-500,fy,c.width+1e3,500);const b=br.current,h=hr.current;if(!b.isFlying){b.pos.y=fy-(fy*BHF);b.pos.x=BSX;}if(is===IS.SETTING_ANGLE||is===IS.SETTING_POWER||is===IS.READY_TO_FIRE){ctx.beginPath();ctx.setLineDash([10,5]);ctx.strokeStyle=is===IS.READY_TO_FIRE?'#f97316':'rgba(255, 255, 255, 0.4)';ctx.lineWidth=3;const ln=150+(p*100);ctx.moveTo(b.pos.x,b.pos.y);ctx.lineTo(b.pos.x+Math.cos(ar.current)*ln,b.pos.y+Math.sin(ar.current)*ln);ctx.stroke();ctx.setLineDash([]);}if(b.isFlying){b.vel.y+=g;b.pos.x+=b.vel.x;b.pos.y+=b.vel.y;rr.current+=b.vel.x*.05;if(b.pos.y-b.radius<10){b.pos.y=b.radius+10;b.vel.y*=-BF;b.bounces++;}if(b.pos.x+b.radius>wx-35){b.pos.x=wx-35-b.radius;b.vel.x*=-BF;b.bounces++;}if(b.pos.x-b.radius<-400){b.pos.x=-400+b.radius;b.vel.x*=-BF;b.bounces++;}if(b.pos.y+b.radius>fy){b.pos.y=fy-b.radius;b.vel.y*=-BF;b.vel.x*=FR;b.bounces++;if(b.bounces>40||(Math.abs(b.vel.y)<.2&&Math.abs(b.vel.x)<.2)){if(!b.scored)om();rb();}}obr.current.forEach(ob=>{const an=ob.angle||0,dx=b.pos.x-(ob.pos.x+ob.width/2),dy=b.pos.y-(ob.pos.y+ob.height/2),ca=Math.cos(-an),sa=Math.sin(-an),lx=dx*ca-dy*sa,ly=dx*sa+dy*ca,hw=ob.width/2,hh=ob.height/2,cx=Math.max(-hw,Math.min(lx,hw)),cy=Math.max(-hh,Math.min(ly,hh)),dfx=lx-cx,dfy=ly-cy,dsq=dfx*dfx+dfy*dfy;if(dsq<b.radius*b.radius){const ds=Math.sqrt(dsq);let nx,ny;if(ds>0){nx=dfx/ds;ny=dfy/ds;}else{nx=0;ny=1;}const pn=b.radius-ds,wpx=(nx*pn)*Math.cos(an)-(ny*pn)*Math.sin(an),wpy=(nx*pn)*Math.sin(an)+(ny*pn)*Math.cos(an);b.pos.x+=wpx;b.pos.y+=wpy;const lvx=b.vel.x*ca-b.vel.y*sa,lvy=b.vel.x*sa+b.vel.y*ca,dt=lvx*nx+lvy*ny;if(dt<0){const bn=ob.type==='bounce'?SB:BF,rlvx=(lvx-2*dt*nx)*bn,rlvy=(lvy-2*dt*ny)*bn;b.vel.x=rlvx*Math.cos(an)-rlvy*Math.sin(an);b.vel.y=rlvx*Math.sin(an)+rlvy*Math.cos(an);b.bounces++;}}});const bx=h.pos.x+35;if(b.pos.x+b.radius>bx&&b.pos.x-b.radius<bx+15&&b.pos.y>h.pos.y-110&&b.pos.y<h.pos.y+30){b.vel.x=-Math.abs(b.vel.x)*BF;b.pos.x=bx-b.radius;}[{x:h.pos.x-h.radius,y:h.pos.y},{x:h.pos.x+h.radius,y:h.pos.y}].forEach(pt=>{const dx=b.pos.x-pt.x,dy=b.pos.y-pt.y,ds=Math.sqrt(dx*dx+dy*dy);if(ds<b.radius+3){const nx=dx/ds,ny=dy/ds,dt=b.vel.x*nx+b.vel.y*ny;if(dt<0){b.vel.x=(b.vel.x-2*dt*nx)*BF;b.vel.y=(b.vel.y-2*dt*ny)*BF;}b.pos.x=pt.x+nx*(b.radius+3);b.pos.y=pt.y+ny*(b.radius+3);}});if(!b.scored&&b.vel.y>0&&b.pos.y>h.pos.y&&b.pos.y-b.vel.y<=h.pos.y){if(Math.abs(b.pos.x-h.pos.x)<h.radius){b.scored=true;npr.current=1;os(Math.abs(b.pos.x-h.pos.x)<8);}}}ctx.fillStyle='#ffffff';ctx.strokeStyle='#000000';ctx.lineWidth=3;ctx.fillRect(h.pos.x+40,h.pos.y-110,15,140);ctx.strokeRect(h.pos.x+40,h.pos.y-110,15,140);const ns=Math.sin(t*.02)*15*npr.current,nd=Math.abs(ns)*.4;ctx.strokeStyle='rgba(255, 255, 255, 0.7)';ctx.lineWidth=2;for(let i=-h.radius+4;i<h.radius;i+=7){ctx.beginPath();ctx.moveTo(h.pos.x+i,h.pos.y+5);ctx.lineTo(h.pos.x+i*.6+ns,h.pos.y+35+nd);ctx.stroke();}ctx.strokeStyle='#ea580c';ctx.lineWidth=7;ctx.beginPath();ctx.ellipse(h.pos.x,h.pos.y,h.radius,7,0,0,Math.PI*2);ctx.stroke();obr.current.forEach(ob=>{ctx.save();ctx.translate(ob.pos.x+ob.width/2,ob.pos.y+ob.height/2);ctx.rotate(ob.angle||0);if(ob.type==='bounce'){const pl=Math.sin(t*.01)*5;ctx.fillStyle='#0891b2';ctx.fillRect(-ob.width/2-pl/2,-ob.height/2-pl/2,ob.width+pl,ob.height+pl);ctx.strokeStyle='#cffafe';ctx.lineWidth=3;ctx.strokeRect(-ob.width/2,-ob.height/2,ob.width,ob.height);}else{ctx.fillStyle=ob.color;ctx.fillRect(-ob.width/2,-ob.height/2,ob.width,ob.height);if(ob.isMoving||ob.rotationSpeed){ctx.strokeStyle='#ef4444';ctx.lineWidth=1;ctx.strokeRect(-ob.width/2-2,-ob.height/2-2,ob.width+4,ob.height+4);}}ctx.restore();});ctx.fillStyle='rgba(0,0,0,0.3)';ctx.beginPath();ctx.ellipse(b.pos.x,fy,b.radius*(1-(fy-b.pos.y)/600),5,0,0,Math.PI*2);ctx.fill();ctx.save();ctx.translate(b.pos.x,b.pos.y);ctx.rotate(rr.current);ctx.fillStyle='#f97316';ctx.beginPath();ctx.arc(0,0,b.radius,0,Math.PI*2);ctx.fill();ctx.strokeStyle='#431407';ctx.lineWidth=1.5;ctx.beginPath();ctx.arc(0,0,b.radius,.3,1.2);ctx.stroke();ctx.restore();ctx.restore();aid=requestAnimationFrame(rnd);};aid=requestAnimationFrame(rnd);return()=>cancelAnimationFrame(aid);},[g,is,om,os,rb,l,p]);return React.createElement("div",{ref:cor,className:"w-full h-full relative cursor-crosshair touch-none select-none overflow-hidden",onMouseMove:hmm,onTouchMove:hmm,onMouseDown:hcmd},React.createElement("canvas",{ref:cr,className:"w-full h-full block"}),slb&&React.createElement("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-30 bg-black/50 backdrop-blur-sm"},React.createElement("div",{className:"bg-white text-slate-900 px-10 py-10 rounded-3xl shadow-2xl border-8 border-orange-600 animate-bounce"},React.createElement("h2",{className:"text-6xl font-black italic tracking-tighter uppercase"},`Level ${l}`))),React.createElement("div",{className:"absolute top-10 left-10 flex flex-col gap-6 items-start"},React.createElement("div",{className:"flex flex-col gap-1"},React.createElement("div",{className:`px-4 py-1 rounded-full font-black text-xs uppercase ${is===IS.SETTING_ANGLE?'bg-orange-600 text-white':'bg-slate-200 text-slate-500'}`},"1. AIM (Click Court)"),React.createElement("div",{className:`px-4 py-1 rounded-full font-black text-xs uppercase ${is===IS.SETTING_POWER?'bg-orange-600 text-white':'bg-slate-200 text-slate-500'}`},"2. SET POWER (Click Bar)"),React.createElement("div",{className:`px-4 py-1 rounded-full font-black text-xs uppercase ${is===IS.READY_TO_FIRE?'bg-green-600 text-white animate-pulse':'bg-slate-200 text-slate-500'}`},"3. FIRE")),(is===IS.SETTING_POWER||is===IS.READY_TO_FIRE||is===IS.SETTING_ANGLE)&&React.createElement("div",{className:"flex flex-col items-center gap-2"},React.createElement("div",{className:`w-10 h-64 border-4 rounded-xl relative overflow-hidden cursor-pointer shadow-xl transition-opacity ${is===IS.SETTING_ANGLE?'opacity-30':'opacity-100'}`,onMouseDown:opc,style:{background:'linear-gradient(to top, #fcd34d, #ea580c, #991b1b)'}},React.createElement("div",{className:"absolute top-0 w-full bg-slate-100/40",style:{height:`${(1-p)*100}%`}}),React.createElement("div",{className:"absolute w-full h-2 bg-white border-y-2 border-black",style:{bottom:`${p*100}%`}})),React.createElement("p",{className:"text-[10px] font-black uppercase text-slate-500"},`Power ${Math.round(p*100)}%`))),React.createElement("div",{className:"absolute bottom-10 right-10 flex flex-col items-center gap-4"},is===IS.SETTING_ANGLE&&React.createElement("div",{className:"bg-black/60 text-white px-8 py-4 rounded-full font-black text-xl uppercase shadow-2xl border-2 border-white/20 animate-pulse"},"Click Court to Lock Aim"),is===IS.READY_TO_FIRE&&React.createElement("div",{className:"flex flex-col gap-4"},React.createElement("button",{className:"px-8 py-3 bg-slate-800 text-white rounded-xl font-bold uppercase text-xs hover:bg-slate-700 shadow-lg",onClick:hca},"Change Aim"),React.createElement("button",{className:"w-32 h-32 rounded-full border-4 border-white bg-green-600 text-white font-black text-xl uppercase shadow-xl hover:scale-110 active:scale-95 transition-all",onClick:hs},"FIRE!")),is===IS.SETTING_POWER&&React.createElement("div",{className:"flex flex-col items-center gap-4"},React.createElement("button",{className:"px-8 py-3 bg-slate-800 text-white rounded-xl font-bold uppercase text-xs hover:bg-slate-700 shadow-lg",onClick:hca},"Back to Aim"),React.createElement("p",{className:"bg-black/80 text-white px-6 py-3 rounded-2xl font-bold text-sm uppercase animate-pulse"},"Set Power on the bar")),is===IS.FLYING&&React.createElement("button",{className:"group flex flex-col items-center gap-2",onClick:rb},React.createElement("div",{className:"bg-amber-500 hover:bg-amber-600 text-white w-20 h-20 rounded-full flex items-center justify-center shadow-2xl border-4 border-white transition-all hover:scale-105 active:scale-90"},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"}))),React.createElement("p",{className:"text-amber-700 font-black text-xs uppercase tracking-widest bg-white/80 px-3 py-1 rounded-full"},"Reset Shot"))))};
const App=()=>{const[v,sv]=useState('MENU'),[gs,sgs]=useState({score:0,attempts:0,multiplier:1,gravity:.6,eventActive:null,commentary:"Step up to the line. No pressure.",level:1,scoreInLevel:0});const hsl=useCallback(l=>{sgs(p=>({...p,level:l,scoreInLevel:0,commentary:`Level ${l}. Let's see some game.`}));sv('GAME');},[]);const hsc=useCallback(async c=>{sgs(p=>{const nsl=p.scoreInLevel+1,lu=nsl>=1,nl=lu?p.level+1:p.level,nslf=lu?0:nsl,as=c?3:2,nts=p.score+as;if(lu&&p.level===20){sv('WIN');return{...p,score:nts,attempts:p.attempts+1,level:20,scoreInLevel:0};}const sm=lu?`LEVEL UP`:(c?"SWISH":"SCORED");fetchCommentary(sm,nts).then(cm=>{sgs(cu=>({...cu,commentary:cm}));});return{...p,score:nts,attempts:p.attempts+1,level:nl,scoreInLevel:nslf};});},[]);const hms=useCallback(async()=>{sgs(p=>{const na=p.attempts+1;fetchCommentary("MISSED",p.score).then(cm=>{sgs(cu=>({...cu,commentary:cm}));});return{...p,attempts:na};});},[]);const hgm=useCallback(()=>{sv('MENU');},[]);const hpa=useCallback(()=>{sgs({score:0,attempts:0,multiplier:1,gravity:.6,eventActive:null,commentary:"Step up to the line. No pressure.",level:1,scoreInLevel:0});sv('MENU');},[]);return React.createElement("div",{className:"relative w-full h-screen bg-slate-100 flex flex-col items-center justify-start text-slate-900"},v==='MENU'&&React.createElement(Menu,{onSelectLevel:hsl}),v==='GAME'&&React.createElement(React.Fragment,null,React.createElement(HUD,{gameState:gs,isLoadingModifier:false,onBackToMenu:hgm}),React.createElement("div",{className:"relative z-10 w-full max-w-4xl h-[65vh] border-4 border-white rounded-3xl bg-white shadow-2xl overflow-hidden mt-2"},React.createElement(GameView,{gravity:gs.gravity,level:gs.level,wind:0,onScore:hsc,onMiss:hms})),React.createElement("div",{className:"mt-8 text-slate-400 font-bold text-xs uppercase tracking-[0.2em]"},`Street Hoops Pro • Level ${gs.level}`)),v==='WIN'&&React.createElement(WinView,{score:gs.score,attempts:gs.attempts,onPlayAgain:hpa}))};
const root=ReactDOM.createRoot(document.getElementById('root'));root.render(React.createElement(App));
JSENDMARKER
echo '</script>' >> /mnt/user-data/outputs/simple-street-hoops-exact.html
echo '</body>' >> /mnt/user-data/outputs/simple-street-hoops-exact.html
echo '</html>' >> /mnt/user-data/outputs/simple-street-hoops-exact.html
wc -l /mnt/user-data/outputs/simple-street-hoops-exact.html
